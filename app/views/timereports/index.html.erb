<div class="page-toolbar mb-3">
  <div class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center gap-2">
    <h1 class="h2 mb-0"><%= t('timereport.title') %></h1>
    <div class="d-flex flex-wrap gap-2">
      <% if can? :read, VolTime %>
        <%= link_to "AÃ±adir/Acumular Tiempo", vol_times_path, class: "btn btn-outline-secondary btn-sm" %>
      <% end %>
      <% if can? :read, Timereport %>
        <%= link_to "Reportar/Restar Tiempo", timereports_path, class: "btn btn-secondary btn-sm" %>
      <% end %>
      <%= link_to t('helpers.submit.create', :model => "Nuevo Reporte de Tiempo"), new_timereport_path, class: "btn btn-primary btn-sm" %>
    </div>
  </div>
</div>

<div class="card border-0 shadow-sm mb-3 search-panel">
  <div class="card-body">
    <%= search_form_for @search, :url => timereports_path, :html => { :method => :get, :class => "row g-3 align-items-end" } do |f| %>
      <div class="col-12">
        <h6 class="text-uppercase text-muted mb-1"><%= t('search.title') %></h6>
      </div>
      <div class="col-12 col-md-2">
        <%= f.label :cgdvcode_eq, t('search.cgdvcode'), class: "form-label" %>
        <%= f.text_field :volunteer_cgdvcode_eq, :size => 3, class: "form-control" %>
      </div>
      <div class="col-12 col-md-4">
        <%= f.label :evento_cont, t('volunteer.evento'), class: "form-label" %>
        <%= f.text_field :evento_cont, class: "form-control" %>
      </div>
      <div class="col-12 col-md-4">
        <%= f.label :name_cont, t('patient.name'), class: "form-label" %>
        <%= f.text_field :volunteer_name_cont, class: "form-control" %>
      </div>
      <div class="col-12 col-lg-6">
        <%= f.label :day_gteq, "Desde: ", class: "form-label d-block" %>
        <div class="date-select-inline">
          <%= f.date_select :day_gteq, { :default => 1.year.ago, :start_year => Time.now.year - 20, :end_year => Time.now.year }, { :class => "form-select d-inline-block w-auto" } %>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <%= f.label :day_lteq, "Hasta: ", class: "form-label d-block" %>
        <div class="date-select-inline">
          <%= f.date_select :day_lteq, { :start_year => Time.now.year - 20, :end_year => Time.now.year }, { :class => "form-select d-inline-block w-auto" } %>
        </div>
      </div>
      <div class="col-12 col-lg-2">
        <%= f.submit t('helpers.search'), class: "btn btn-outline-primary w-100" %>
      </div>
    <% end %>
  </div>
</div>

<div class="d-flex justify-content-between align-items-center mb-2">
  <strong class="text-muted small"><%= t('search.sort') %></strong>
  <div class="pagination-wrap"><%= paginate @timereports %></div>
</div>

<div class="card border-0 shadow-sm list-card">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0 app-table">
      <thead class="table-light">
        <tr>
          <th><%= sort_link @search, :volunteer_cgdvcode, t('patient.cgdvcode'), :default_order => :desc %></th>
          <th><%= sort_link @search, :day, t('volunteer.day'), :default_order => :desc %></th>
          <th><%= sort_link @search, :begin, t('volunteer.begin'), :default_order => :desc %></th>
          <th><%= sort_link @search, :end, t('volunteer.end'), :default_order => :desc %></th>
          <th><%= t('volunteer.tiempo') %></th>
          <th><%= sort_link @search, :evento, t('volunteer.evento') %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <%= render @timereports %>
      </tbody>
      <tfoot class="table-light">
        <tr>
          <td colspan="3"></td>
          <th>Tiempo Total:</th>
          <th><%= tiempo_total(@timereports) %></th>
          <td colspan="2"></td>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<div class="pagination-wrap mt-3"><%= paginate @timereports %></div>
