jQuery(function(e){e("form a.add_nested_fields").live("click",function(){var t=e(this).attr("data-association"),n=e("#"+t+"_fields_blueprint").html(),r=(e(this).closest(".fields").find("input:first").attr("name")||"").replace(new RegExp("[[a-z]+]$"),"");if(r){var s=r.match(/[a-z_]+_attributes/g)||[],o=r.match(/(new_)?[0-9]+/g)||[];for(i=0;i<s.length;i++)o[i]&&(n=n.replace(new RegExp("(_"+s[i]+")_.+?_","g"),"$1_"+o[i]+"_"),n=n.replace(new RegExp("(\\["+s[i]+"\\])\\[.+?\\]","g"),"$1["+o[i]+"]"))}var u=new RegExp("new_"+t,"g"),a=(new Date).getTime();return n=n.replace(u,"new_"+a),e(this).before(n),e(this).closest("form").trigger("nested:fieldAdded"),!1}),e("form a.remove_nested_fields").live("click",function(){var t=e(this).prev("input[type=hidden]")[0];return t&&(t.value="1"),e(this).closest(".fields").hide(),e(this).closest("form").trigger("nested:fieldRemoved"),!1})});